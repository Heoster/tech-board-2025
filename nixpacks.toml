[phases.setup]
nixPkgs = ['nodejs-18_x', 'npm-9_x']

[phases.install]
cmds = [
    'npm ci --prefer-offline --no-audit',
    'cd server && npm ci --prefer-offline --no-audit',
    'cd client && npm ci --prefer-offline --no-audit'
]

[phases.build]
cmds = [
    'echo "Building client application..."',
    'cd client && npm run build',
    'echo "Client build completed"',
    'ls -la client/dist || echo "Client dist directory not found"',
    'echo "Build process finished successfully"'
]

[start]
cmd = 'npm run railway:start'