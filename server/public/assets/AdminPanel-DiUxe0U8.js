import{r as e,j as t,u as r}from"./vendor-react-CY1O2pxN.js";import{a,u as s}from"./index-DMUTUhHV.js";import{a as d}from"./vendor-utils-C-1G2k3o.js";import"./vendor-misc-IyfMy1hy.js";const l=()=>{const[r,s]=e.useState(null),[d,l]=e.useState([]),[n,i]=e.useState(!0),[c,o]=e.useState(!1);e.useEffect(()=>{x()},[]);const x=async(e=!1)=>{e&&o(!0);try{const e=await a.get("/admin/system-stats");s(e.data.data);const t=await a.get("/admin/results"),r=Array.isArray(t.data.data)?t.data.data.sort((e,t)=>new Date(t.end_time).getTime()-new Date(e.end_time).getTime()).slice(0,15):[];l(r)}catch(t){}finally{i(!1),o(!1)}},m=e=>(new Intl.NumberFormat).format(e);return n?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard Overview"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time system statistics and student performance analytics"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>x(!0),disabled:c,className:"flex items-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:[t.jsx("svg",{className:"w-4 h-4 mr-2 "+(c?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c?"Refreshing...":"Refresh"]}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Last updated: ",(new Date).toLocaleTimeString()]})]})]}),r&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-6 shadow-lg border border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Students"}),t.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:m(r.totalStudents)}),t.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Registered accounts"})]}),t.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]})}),t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-6 shadow-lg border border-green-200 dark:border-green-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Question Bank"}),t.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100 mt-1",children:m(r.totalQuestions)}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Available questions"})]}),t.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]})}),t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-6 shadow-lg border border-purple-200 dark:border-purple-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Completed Tests"}),t.jsx("p",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100 mt-1",children:m(r.completedTests||r.totalQuizzes)}),t.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Test submissions"})]}),t.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),t.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-xl p-6 shadow-lg border border-orange-200 dark:border-orange-800",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Qualified Students"}),t.jsx("p",{className:"text-3xl font-bold text-orange-900 dark:text-orange-100 mt-1",children:m((d||[]).filter(e=>e.score>=36).length)}),t.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"Score ≥ 72%"})]}),t.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-dark-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Performance Overview"}),t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:t.jsxs("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:[t.jsx("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),t.jsx("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center mr-3",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Qualified Students"})]}),t.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:(d||[]).filter(e=>e.score>=36).length})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Average Score"})]}),t.jsxs("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[(d||[]).length>0?(d.reduce((e,t)=>e+t.score,0)/d.length).toFixed(1):"0","/50"]})]}),t.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pass Rate"}),t.jsxs("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:[(d||[]).length>0?((d||[]).filter(e=>e.score>=36).length/d.length*100).toFixed(1):"0","%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:((d||[]).length>0?(d||[]).filter(e=>e.score>=36).length/d.length*100:0)+"%"}})})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-dark-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Grade Distribution"}),t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),t.jsx("div",{className:"space-y-4",children:[6,7,8,9,11].map((e,r)=>{const a=(d||[]).filter(t=>t.grade===e).length,s=Math.max(...[6,7,8,9,11].map(e=>(d||[]).filter(t=>t.grade===e).length)),l=s>0?a/s*100:0;return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Grade ",e]}),t.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:a})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:`${["bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-red-500"][r]} h-2 rounded-full transition-all duration-500`,style:{width:`${l}%`}})})]},e)})})]}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg border border-gray-200 dark:border-dark-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Health"}),t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z",clipRule:"evenodd"})})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3 animate-pulse"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Server Status"})]}),t.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:"Online"})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Database"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:"Healthy"}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==r?void 0:r.databaseSize)||"N/A"})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last Backup"})]}),t.jsx("span",{className:"text-sm font-bold text-yellow-600 dark:text-yellow-400",children:r?new Date(r.lastBackup).toLocaleDateString():"N/A"})]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-lg border border-gray-200 dark:border-dark-600",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Recent Test Results"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Latest 15 completed assessments with detailed performance metrics"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Student Details"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Grade"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Performance"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Qualification"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Completion"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:(d||[]).map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700/30 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:e.student_name.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e.student_name}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Roll: ",e.roll_number," • Section ",e.section]})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:["Grade ",e.grade]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[e.score,"/",e.total_questions]}),t.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:[e.percentage.toFixed(1),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-300 "+(e.score>=36?"bg-green-500":e.score>=25?"bg-yellow-500":"bg-red-500"),style:{width:`${e.percentage}%`}})})]})})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full text-xs font-semibold "+(r=e.score,r>=36?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":r>=25?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"),children:e.score>=36?t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"QUALIFIED"]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"NOT QUALIFIED"]})})})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(e.end_time).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.end_time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]},e.id);var r})})]})}),0===(d||[]).length&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No Test Results Yet"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Recent quiz attempts will appear here once students start taking tests."})]})]})]})},n=()=>{const[r,s]=e.useState([]),[d,l]=e.useState(!0),[n,i]=e.useState(!1),[c,o]=e.useState(!1),[x,m]=e.useState({name:"",rollNumber:1,grade:6,section:"A",password:""}),[g,u]=e.useState(null),[h,p]=e.useState(""),[b,y]=e.useState("all"),[f,j]=e.useState("all"),[k,v]=e.useState({name:"",rollNumber:1,grade:6,section:"A",password:""});e.useEffect(()=>{N()},[]);const N=async()=>{try{const e=(await a.get("/admin/students")).data,t=(null==e?void 0:e.students)||(null==e?void 0:e.data)||[];s(Array.isArray(t)?t:[])}catch(e){s([])}finally{l(!1)}},w=(r||[]).filter(e=>{if(!e)return!1;const t=(e.name||"").toLowerCase().includes(h.toLowerCase())||(e.roll_number||"").toString().includes(h),r="all"===b||(e.grade||"").toString()===b,a="all"===f||(e.exam_status||"")===f;return t&&r&&a}),S=e=>{switch(e){case"completed":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"in_progress":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";case"not_started":return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200";default:return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}};return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Student Management"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage student accounts and view their progress"})]}),t.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-6 py-3 rounded-xl hover:from-red-600 hover:to-orange-600 transition-all duration-200 shadow-lg",children:[t.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Student"]})]}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Students"}),t.jsx("input",{type:"text",placeholder:"Search by name or roll number...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Grade"}),t.jsxs("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Grades"}),[6,7,8,9,11].map(e=>t.jsxs("option",{value:e.toString(),children:["Grade ",e]},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Status"}),t.jsxs("select",{value:f,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"not_started",children:"Not Started"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(null==w?void 0:w.length)||0," of ",(null==r?void 0:r.length)||0," students"]})})]})}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Student"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Roll No."}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Grade"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Score"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Result"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:0===(w||[]).length?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:d?"Loading students...":"No students found"})}):(w||[]).map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700/50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Section ",e.section]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900 dark:text-gray-100",children:e.roll_number}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.grade}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(e.exam_status)}`,children:e.exam_status.replace("_"," ").toUpperCase()})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:null!==e.score?`${e.score}/50`:"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==e.score?t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(r=e.score,null===r?"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200":r>=36?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":r>=25?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"),children:e.score>=36?"QUALIFIED":"NOT QUALIFIED"}):t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"-"})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[t.jsx("button",{onClick:()=>{u(e),m({name:e.name,rollNumber:parseInt(e.roll_number),grade:e.grade,section:e.section,password:""}),o(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Edit"}),t.jsx("button",{onClick:()=>(async e=>{const t=prompt("Enter new password for student:");if(t)try{await a.put(`/admin/students/${e}/password`,{password:t}),alert("Password reset successfully")}catch(r){alert("Failed to reset password")}})(e.id),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Reset Password"}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this student?"))try{await a.delete(`/admin/students/${e}`),N()}catch(t){alert("Failed to delete student")}})(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]},e.id);var r})})]})})}),n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Add New Student"}),t.jsxs("form",{onSubmit:async e=>{var t,r,s;e.preventDefault();try{await a.post("/admin/students",{name:k.name,rollNumber:k.rollNumber,grade:k.grade,section:k.section,password:k.password}),i(!1),v({name:"",rollNumber:1,grade:6,section:"A",password:""}),N()}catch(d){const e=d;alert((null==(s=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.error)?void 0:s.message)||e.message||"Failed to add student")}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),t.jsx("input",{type:"text",required:!0,value:k.name,onChange:e=>v({...k,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Roll Number"}),t.jsx("input",{type:"number",min:"1",max:"80",required:!0,value:k.rollNumber,onChange:e=>v({...k,rollNumber:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grade"}),t.jsx("select",{value:k.grade,onChange:e=>v({...k,grade:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[6,7,8,9,11].map(e=>t.jsxs("option",{value:e,children:["Grade ",e]},e))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Section"}),t.jsxs("select",{value:k.section,onChange:e=>v({...k,section:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"A",children:"Section A"}),t.jsx("option",{value:"B",children:"Section B"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),t.jsx("input",{type:"password",required:!0,minLength:6,value:k.password,onChange:e=>v({...k,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-dark-600 rounded-lg hover:bg-gray-300 dark:hover:bg-dark-500 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg hover:from-red-600 hover:to-orange-600 transition-all duration-200",children:"Add Student"})]})]})]})}),c&&g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Edit Student"}),t.jsxs("form",{onSubmit:async e=>{var t,r,s;if(e.preventDefault(),g)try{await a.put(`/admin/students/${g.id}`,{name:x.name,rollNumber:x.rollNumber,grade:x.grade,section:x.section}),o(!1),u(null),N()}catch(d){const e=d;alert((null==(s=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.error)?void 0:s.message)||e.message||"Failed to update student")}},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),t.jsx("input",{type:"text",required:!0,value:x.name,onChange:e=>m({...x,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Roll Number"}),t.jsx("input",{type:"number",min:"1",max:"80",required:!0,value:x.rollNumber,onChange:e=>m({...x,rollNumber:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grade"}),t.jsx("select",{value:x.grade,onChange:e=>m({...x,grade:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[6,7,8,9,11].map(e=>t.jsxs("option",{value:e,children:["Grade ",e]},e))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Section"}),t.jsxs("select",{value:x.section,onChange:e=>m({...x,section:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"A",children:"Section A"}),t.jsx("option",{value:"B",children:"Section B"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{o(!1),u(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-dark-600 rounded-lg hover:bg-gray-300 dark:hover:bg-dark-500 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:"Update Student"})]})]})]})})]})},i=()=>{const[r,s]=e.useState([]),[d,l]=e.useState(!0),[n,i]=e.useState(!1),[c,o]=e.useState(!1),[x,m]=e.useState(null),[g,u]=e.useState("all"),[h,p]=e.useState("all"),[b,y]=e.useState(1),[f,j]=e.useState(1),[k,v]=e.useState(""),[N,w]=e.useState({grade:6,difficulty:"basic",questionText:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),S=e.useCallback(async()=>{var e;try{const t=new URLSearchParams({page:b.toString(),limit:"20"});"all"!==g&&t.append("grade",g),"all"!==h&&t.append("difficulty",h);const r=(await a.get(`/admin/questions?${t}`)).data;s(Array.isArray(null==r?void 0:r.questions)?r.questions:[]),j((null==(e=null==r?void 0:r.pagination)?void 0:e.pages)||1)}catch(t){}finally{l(!1)}},[b,g,h]);e.useEffect(()=>{S()},[S]);const C=()=>{w({grade:6,difficulty:"basic",questionText:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})},z=(e,t,r)=>{const a=[...N.options];"isCorrect"===t&&!0===r?a.forEach((t,r)=>{t.isCorrect=r===e}):a[e]={...a[e],[t]:r},w({...N,options:a})},L=(e,t,r)=>{if(!x)return;const a=[...x.options];"isCorrect"===t&&!0===r?a.forEach((t,r)=>{t.isCorrect=r===e}):a[e]={...a[e],[t]:r},m({...x,options:a})},A=e=>{switch(e){case"basic":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"medium":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";case"advanced":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}},R=(r||[]).filter(e=>e.question_text.toLowerCase().includes(k.toLowerCase()));return d?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Question Management"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage the question bank for all grades"})]}),t.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-6 py-3 rounded-xl hover:from-red-600 hover:to-orange-600 transition-all duration-200 shadow-lg",children:[t.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Question"]})]}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Questions"}),t.jsx("input",{type:"text",placeholder:"Search question text...",value:k,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Grade"}),t.jsxs("select",{value:g,onChange:e=>{u(e.target.value),y(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Grades"}),[6,7,8,9,11].map(e=>t.jsxs("option",{value:e.toString(),children:["Grade ",e]},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Difficulty"}),t.jsxs("select",{value:h,onChange:e=>{p(e.target.value),y(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Difficulties"}),t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"advanced",children:"Advanced"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",R.length," questions"]})})]})}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-lg",children:[t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-4",children:R.map((e,r)=>t.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-dark-700/50",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["Q",20*(b-1)+r+1]}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Grade ",e.grade]}),t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${A(e.difficulty)}`,children:e.difficulty.toUpperCase()})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>{m(e),o(!0)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this question?"))try{await a.delete(`/admin/questions/${e}/`),S()}catch(t){alert("Failed to delete question")}})(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),t.jsx("div",{className:"mb-3",children:t.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:e.question_text})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.options.map((e,r)=>t.jsxs("div",{className:"p-2 rounded-lg text-sm "+(e.isCorrect?"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-600":"bg-gray-100 dark:bg-dark-700"),children:[t.jsxs("span",{className:"font-semibold mr-2",children:[String.fromCharCode(65+r),"."]}),e.text,e.isCorrect&&t.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400 font-semibold",children:"✓"})]},e.id))})]},e.id))})}),f>1&&t.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-dark-600",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",b," of ",f]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>y(Math.max(1,b-1)),disabled:1===b,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-dark-600 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Previous"}),t.jsx("button",{onClick:()=>y(Math.min(f,b+1)),disabled:b===f,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-dark-600 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})})]}),n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Add New Question"}),t.jsxs("form",{onSubmit:async e=>{var t,r,s;e.preventDefault();if(1===N.options.filter(e=>e.isCorrect).length)try{await a.post("/admin/questions/",N),i(!1),C(),S()}catch(d){const e=d;alert((null==(s=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.error)?void 0:s.message)||e.message||"Failed to add question")}else alert("Please select exactly one correct answer")},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grade"}),t.jsx("select",{value:N.grade,onChange:e=>w({...N,grade:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[6,7,8,9,11].map(e=>t.jsxs("option",{value:e,children:["Grade ",e]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Difficulty"}),t.jsxs("select",{value:N.difficulty,onChange:e=>w({...N,difficulty:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Question Text"}),t.jsx("textarea",{required:!0,rows:3,value:N.questionText,onChange:e=>w({...N,questionText:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",placeholder:"Enter the question text..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Options (Select one correct answer)"}),t.jsx("div",{className:"space-y-3",children:N.options.map((e,r)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"correctOption",checked:e.isCorrect,onChange:()=>z(r,"isCorrect",!0),className:"text-red-500 focus:ring-red-500"}),t.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[String.fromCharCode(65+r),"."]}),t.jsx("input",{type:"text",required:!0,value:e.text,onChange:e=>z(r,"text",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",placeholder:`Option ${String.fromCharCode(65+r)}`})]},r))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{i(!1),C()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-dark-600 rounded-lg hover:bg-gray-300 dark:hover:bg-dark-500 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg hover:from-red-600 hover:to-orange-600 transition-all duration-200",children:"Add Question"})]})]})]})}),c&&x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Edit Question"}),t.jsxs("form",{onSubmit:async e=>{var t,r,s;if(e.preventDefault(),x)try{const e={grade:x.grade,difficulty:x.difficulty,questionText:x.question_text,options:x.options.map(e=>({text:e.text,isCorrect:e.isCorrect}))};await a.put(`/admin/questions/${x.id}/`,e),o(!1),m(null),S()}catch(d){const e=d;alert((null==(s=null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.error)?void 0:s.message)||e.message||"Failed to update question")}},className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grade"}),t.jsx("select",{value:x.grade,onChange:e=>m({...x,grade:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[6,7,8,9,11].map(e=>t.jsxs("option",{value:e,children:["Grade ",e]},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Difficulty"}),t.jsxs("select",{value:x.difficulty,onChange:e=>m({...x,difficulty:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"basic",children:"Basic"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Question Text"}),t.jsx("textarea",{required:!0,rows:3,value:x.question_text,onChange:e=>m({...x,question_text:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Options (Select one correct answer)"}),t.jsx("div",{className:"space-y-3",children:x.options.map((e,r)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"radio",name:"editCorrectOption",checked:e.isCorrect,onChange:()=>L(r,"isCorrect",!0),className:"text-red-500 focus:ring-red-500"}),t.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[String.fromCharCode(65+r),"."]}),t.jsx("input",{type:"text",required:!0,value:e.text,onChange:e=>L(r,"text",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]},e.id))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{o(!1),m(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-dark-600 rounded-lg hover:bg-gray-300 dark:hover:bg-dark-500 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg hover:from-red-600 hover:to-orange-600 transition-all duration-200",children:"Update Question"})]})]})]})})]})},c=()=>{const[r,a]=e.useState([]),[s,l]=e.useState(null),[n,i]=e.useState(!0),[c,o]=e.useState(null),[x,m]=e.useState(!1),[g,u]=e.useState("all"),[h,p]=e.useState("all"),[b,y]=e.useState(""),[f,j]=e.useState("score"),[k,v]=e.useState("desc");e.useEffect(()=>{(async()=>{var e;i(!0);try{const t=await d.get("/api/admin/results"),r=(null==(e=t.data)?void 0:e.data)||t.data||[];a(Array.isArray(r)?r:[]),N(Array.isArray(r)?r:[])}catch(t){a([]),N([])}finally{i(!1)}})()},[]);const N=e=>{try{if(0===e.length)return void l({totalAttempts:0,averageScore:0,passRate:0,gradeStats:[],difficultyStats:[]});const t=e.length,r=e.reduce((e,t)=>e+t.score,0)/t,a=e.filter(e=>(e.score??0)>=36).length/t*100,s=e.reduce((e,t)=>(e[t.grade]||(e[t.grade]=[]),e[t.grade].push(t),e),{}),d=Object.keys(s).map(e=>{const t=s[e],r=t.reduce((e,t)=>e+(t.score??0),0)/t.length,a=t.filter(e=>(e.score??0)>=36).length/t.length*100;return{grade:parseInt(e),attempts:t.length,averageScore:r,passRate:a}});l({totalAttempts:t,averageScore:r,passRate:a,gradeStats:d,difficultyStats:[]})}catch(t){}},w=[...(r||[]).filter(e=>{if(!e)return!1;const t=(e.student_name||"").toLowerCase().includes(b.toLowerCase())||(e.roll_number||"").toString().includes(b),r="all"===g||(e.grade||"").toString()===g,a="all"===h||"qualified"===h&&(e.score||0)>=36||"not_qualified"===h&&(e.score||0)<36;return t&&r&&a})].sort((e,t)=>{let r,a;switch(f){case"score":default:r=e.score,a=t.score;break;case"percentage":r=e.percentage,a=t.percentage;break;case"date":r=new Date(e.end_time).getTime(),a=new Date(t.end_time).getTime()}return"asc"===k?r-a:a-r});return n?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Quiz Results & Analytics"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive quiz performance analysis"})]}),t.jsxs("button",{onClick:()=>{const e=w.map(e=>({"Student Name":e.student_name,"Roll Number":e.roll_number,Grade:e.grade,Section:e.section,Score:e.score,"Total Questions":e.total_questions,Percentage:e.percentage.toFixed(1),Result:e.score>=36?"QUALIFIED":"NOT QUALIFIED","Start Time":new Date(e.start_time).toLocaleString(),"End Time":new Date(e.end_time).toLocaleString()})),t=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),r=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`quiz_results_${(new Date).toISOString().split("T")[0]}.csv`,s.click(),window.URL.revokeObjectURL(a)},className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-blue-600 transition-all duration-200 shadow-lg",children:[t.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]}),s&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Attempts"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.totalAttempts})]})]})}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Score"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[s.averageScore.toFixed(1),"/50"]})]})]})}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pass Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[s.passRate.toFixed(1),"%"]})]})]})}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsxs("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:[t.jsx("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),t.jsx("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Qualified"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.filter(e=>e.score>=36).length})]})]})})]}),s&&s.gradeStats.length>0&&t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Grade-wise Performance"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200 dark:border-dark-600",children:[t.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Grade"}),t.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Attempts"}),t.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Average Score"}),t.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700 dark:text-gray-300",children:"Pass Rate"})]})}),t.jsx("tbody",{children:s.gradeStats.map(e=>t.jsxs("tr",{className:"border-b border-gray-100 dark:border-dark-700",children:[t.jsxs("td",{className:"py-2 px-4 font-medium text-gray-900 dark:text-gray-100",children:["Grade ",e.grade]}),t.jsx("td",{className:"py-2 px-4 text-gray-700 dark:text-gray-300",children:e.attempts}),t.jsxs("td",{className:"py-2 px-4 text-gray-700 dark:text-gray-300",children:[e.averageScore.toFixed(1),"/50"]}),t.jsx("td",{className:"py-2 px-4",children:t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-semibold "+(e.passRate>=70?"bg-green-100 text-green-800":e.passRate>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.passRate.toFixed(1),"%"]})})]},e.grade))})]})})]}),t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Students"}),t.jsx("input",{type:"text",placeholder:"Search by name or roll number...",value:b,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Grade"}),t.jsxs("select",{value:g,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Grades"}),[6,7,8,9,11].map(e=>t.jsxs("option",{value:e.toString(),children:["Grade ",e]},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Result"}),t.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"all",children:"All Results"}),t.jsx("option",{value:"qualified",children:"Qualified"}),t.jsx("option",{value:"not_qualified",children:"Not Qualified"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort By"}),t.jsxs("select",{value:f,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"score",children:"Score"}),t.jsx("option",{value:"percentage",children:"Percentage"}),t.jsx("option",{value:"date",children:"Date"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Order"}),t.jsxs("select",{value:k,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100",children:[t.jsx("option",{value:"desc",children:"High to Low"}),t.jsx("option",{value:"asc",children:"Low to High"})]})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-lg overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-dark-600",children:t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",w.length," of ",r.length," results"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Student"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Roll No."}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Grade"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Score"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Percentage"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Result"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-600",children:w.map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700/50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.student_name}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Section ",e.section]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900 dark:text-gray-100",children:e.roll_number}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.grade}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-gray-100",children:[e.score,"/",e.total_questions]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-gray-100",children:[e.percentage.toFixed(1),"%"]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(a=e.score,a>=36?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":a>=25?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"),children:e.score>=36?"QUALIFIED":"NOT QUALIFIED"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.end_time).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsx("button",{onClick:()=>(async e=>{m(!0);try{const t=await d.get(`/api/admin/student-details/${e}`),a=r.find(t=>t.id===e);a&&o({student:a,responses:t.data.data})}catch(t){}finally{m(!1)}})(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View Details"})})]},e.id);var a})})]})})]}),c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:c.student.student_name}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:["Roll Number: ",c.student.roll_number]}),t.jsxs("div",{children:["Grade: ",c.student.grade," - Section ",c.student.section]}),t.jsxs("div",{children:["Score: ",c.student.score,"/",c.student.total_questions]}),t.jsxs("div",{children:["Result: ",c.student.score>=36?"QUALIFIED":"NOT QUALIFIED"]})]})]}),t.jsx("button",{onClick:()=>o(null),className:"text-white/80 hover:text-white transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-600",children:t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.responses.filter(e=>e.is_correct).length}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Correct"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.responses.filter(e=>!e.is_correct&&null!==e.selected_option_id).length}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wrong"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-600",children:c.responses.filter(e=>null===e.selected_option_id).length}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unanswered"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[c.student.percentage.toFixed(1),"%"]}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Percentage"})]})]})}),t.jsxs("div",{className:"overflow-y-auto max-h-96 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Question-by-Question Analysis"}),t.jsx("div",{className:"space-y-4",children:c.responses.map((e,r)=>t.jsxs("div",{className:"border-2 rounded-xl p-4 "+(null===e.selected_option_id?"border-gray-300 bg-gray-50 dark:bg-dark-700 dark:border-dark-600":e.is_correct?"border-green-300 bg-green-50 dark:bg-green-900/20 dark:border-green-600":"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-600"),children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["Q",r+1]}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold "+("basic"===e.difficulty?"bg-blue-100 text-blue-800":"medium"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.difficulty.toUpperCase()})]}),t.jsx("div",{className:"flex items-center space-x-2",children:null===e.selected_option_id?t.jsx("span",{className:"text-gray-500 text-sm",children:"Not Answered"}):e.is_correct?t.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):t.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t.jsx("div",{className:"mb-3",children:t.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e.question_text})}),t.jsx("div",{className:"space-y-2",children:e.options.map((r,a)=>t.jsxs("div",{className:"p-2 rounded-lg flex items-center space-x-2 "+(r.id===e.selected_option_id&&r.is_correct?"bg-green-100 dark:bg-green-900/30 border border-green-300":r.id!==e.selected_option_id||r.is_correct?r.is_correct?"bg-green-100 dark:bg-green-900/30 border border-green-300":"bg-gray-50 dark:bg-dark-700":"bg-red-100 dark:bg-red-900/30 border border-red-300"),children:[t.jsx("span",{className:"font-semibold text-sm",children:String.fromCharCode(65+a)}),t.jsx("span",{className:"flex-1",children:r.text}),r.id===e.selected_option_id&&t.jsx("span",{className:"text-xs font-bold text-blue-600",children:"SELECTED"}),r.is_correct&&t.jsx("span",{className:"text-xs font-bold text-green-600",children:"CORRECT"})]},r.id))}),null===e.selected_option_id&&t.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 italic",children:"Student did not answer this question"})]},e.question_id))})]})]})}),x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-red-500"}),t.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Loading detailed results..."})]})})})]})},o=()=>{const[r,a]=e.useState("general"),[s,l]=e.useState(null),[n,i]=e.useState({timeLimit:60,totalQuestions:50,passingScore:36,allowRetake:!1,shuffleQuestions:!0,shuffleOptions:!0}),[c,o]=e.useState(!0),[x,m]=e.useState(!1);e.useEffect(()=>{g(),u()},[]);const g=async()=>{try{const e=await d.get("/admin/system-stats");l(e.data.data)}catch(e){l({totalStudents:150,totalQuestions:1250,totalQuizzes:89,databaseSize:"45.2 MB",lastBackup:(new Date).toISOString()})}finally{o(!1)}},u=async()=>{try{const e=await d.get("/admin/quiz-settings");i(e.data.data)}catch(e){i({timeLimit:50,totalQuestions:50,passingScore:36,allowRetake:!1,shuffleQuestions:!0,shuffleOptions:!0})}};return c?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"System Settings"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure system parameters and maintenance"})]}),t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-lg",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-dark-600",children:t.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"general",name:"General",icon:"⚙️"},{id:"quiz",name:"Quiz Settings",icon:"📝"},{id:"database",name:"Database",icon:"🗄️"},{id:"maintenance",name:"Maintenance",icon:"🔧"}].map(e=>t.jsxs("button",{onClick:()=>a(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(r===e.id?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:[t.jsx("span",{className:"mr-2",children:e.icon}),e.name]},e.id))})}),t.jsxs("div",{className:"p-6",children:["general"===r&&s&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Overview"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Students"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.totalStudents})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Questions"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.totalQuestions})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Quiz Attempts"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.totalQuizzes})]})]})}),t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Database Size"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.databaseSize})]})]})})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"System Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Server Status:"}),t.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"Online"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Last Backup:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:new Date(s.lastBackup).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"System Version:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"TECH BOARD 2025 v1.0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Environment:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Production"})]})]})]})]}),"quiz"===r&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Quiz Configuration"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Limit (minutes)"}),t.jsx("input",{type:"number",min:"30",max:"180",value:n.timeLimit,onChange:e=>i({...n,timeLimit:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total Questions"}),t.jsx("input",{type:"number",min:"20",max:"100",value:n.totalQuestions,onChange:e=>i({...n,totalQuestions:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Passing Score"}),t.jsx("input",{type:"number",min:"1",max:n.totalQuestions,value:n.passingScore,onChange:e=>i({...n,passingScore:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-dark-700 dark:text-gray-100"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"allowRetake",checked:n.allowRetake,onChange:e=>i({...n,allowRetake:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"allowRetake",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Allow Retake"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"shuffleQuestions",checked:n.shuffleQuestions,onChange:e=>i({...n,shuffleQuestions:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"shuffleQuestions",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Shuffle Questions"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"shuffleOptions",checked:n.shuffleOptions,onChange:e=>i({...n,shuffleOptions:e.target.checked}),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"shuffleOptions",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Shuffle Options"})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:async()=>{m(!0);try{await d.put("/admin/quiz-settings",n),alert("Quiz settings saved successfully")}catch(e){alert("Failed to save quiz settings")}finally{m(!1)}},disabled:x,className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-6 py-3 rounded-xl hover:from-red-600 hover:to-orange-600 transition-all duration-200 shadow-lg disabled:opacity-50",children:x?"Saving...":"Save Settings"})})]}),"database"===r&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Database Management"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Backup Database"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Create a backup of the current database. This includes all students, questions, and quiz results."}),t.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to create a database backup?"))try{await d.post("/admin/backup-database"),alert("Database backup created successfully"),g()}catch(e){alert("Failed to create database backup")}},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Create Backup"})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Restore Database"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Restore database from a previous backup. This will overwrite all current data."}),t.jsx("button",{onClick:async()=>{if(!confirm("Are you sure you want to restore the database? This will overwrite current data."))return;const e=prompt("Enter backup filename:");if(e)try{await d.post("/admin/restore-database",{filename:e}),alert("Database restored successfully"),g()}catch(t){alert("Failed to restore database")}},className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors",children:"Restore Backup"})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Database Statistics"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Tables:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"8"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Total Records:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:s?s.totalStudents+s.totalQuestions+s.totalQuizzes:"Loading..."})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Size:"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:s?s.databaseSize:"Loading..."})]})]})]})]}),"maintenance"===r&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"System Maintenance"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Clear Cache"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Clear system cache to free up memory and ensure fresh data loading."}),t.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to clear the system cache?"))try{await d.post("/admin/clear-cache"),alert("System cache cleared successfully")}catch(e){alert("Failed to clear cache")}},className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Clear Cache"})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Optimize Database"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Optimize database performance by rebuilding indexes and cleaning up unused space."}),t.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to optimize the database? This may take a few minutes."))try{await d.post("/admin/optimize-database"),alert("Database optimized successfully"),g()}catch(e){alert("Failed to optimize database")}},className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"Optimize Database"})]})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-6",children:[t.jsx("h4",{className:"text-md font-semibold text-red-900 dark:text-red-100 mb-3",children:"⚠️ Danger Zone"}),t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-4",children:"These actions are irreversible and should be used with extreme caution."}),t.jsxs("div",{className:"space-x-4",children:[t.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset all quiz results? This cannot be undone.")&&alert("This feature is not yet implemented")},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Reset All Quiz Results"}),t.jsx("button",{onClick:()=>{confirm("Are you sure you want to reset the entire system? This will delete ALL data.")&&alert("This feature is not yet implemented")},className:"bg-red-700 text-white px-4 py-2 rounded-lg hover:bg-red-800 transition-colors",children:"Reset Entire System"})]})]})]})]})]})]})},x=()=>{const{user:a,logout:d}=s(),x=r(),[m,g]=e.useState("dashboard"),[u,h]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;("dark"===e||!e&&t)&&(h(!0),document.documentElement.classList.add("dark"))},[]);const p=[{id:"dashboard",name:"Dashboard",icon:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),description:"Overview & Statistics"},{id:"students",name:"Students",icon:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}),description:"Manage Students"},{id:"questions",name:"Questions",icon:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),description:"Question Bank"},{id:"quizzes",name:"Quiz Results",icon:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),description:"Quiz Analytics"},{id:"settings",name:"Settings",icon:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),description:"System Configuration"}];return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-dark-900 dark:via-dark-800 dark:to-dark-700 transition-all duration-500",children:[t.jsx("header",{className:"bg-white/80 dark:bg-dark-800/80 backdrop-blur-glass dark:backdrop-blur-glass-dark border-b border-gray-200 dark:border-dark-700 sticky top-0 z-40",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsxs("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M12 2L3 7L12 12L21 7L12 2Z"}),t.jsx("path",{d:"M3 17L12 22L21 17"}),t.jsx("path",{d:"M3 12L12 17L21 12"})]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold gradient-text font-space",children:"TECH BOARD 2025 Admin"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Comprehensive Management Panel"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["Admin: ",null==a?void 0:a.username]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"System Administrator"})]}),t.jsx("button",{onClick:()=>{h(!u),u?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"))},className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:u?t.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):t.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),t.jsx("button",{onClick:()=>{d(),x("/")},className:"p-2 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors",title:"Logout",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})})]})]})})}),t.jsxs("div",{className:"flex",children:[t.jsx("nav",{className:"w-64 bg-white/80 dark:bg-dark-800/80 backdrop-blur-glass dark:backdrop-blur-glass-dark border-r border-gray-200 dark:border-dark-700 min-h-screen sticky top-[73px]",children:t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-2",children:p.map(e=>t.jsxs("button",{onClick:()=>g(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 "+(m===e.id?"bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"),children:[e.icon,t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-xs "+(m===e.id?"text-white/80":"text-gray-500 dark:text-gray-400"),children:e.description})]})]},e.id))})})}),t.jsx("main",{className:"flex-1 p-6",children:(()=>{switch(m){case"dashboard":default:return t.jsx(l,{});case"students":return t.jsx(n,{});case"questions":return t.jsx(i,{});case"quizzes":return t.jsx(c,{});case"settings":return t.jsx(o,{})}})()})]})]})};export{x as default};
